<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FKT71P5JMH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FKT71P5JMH', {
      send_page_view: true
    });
  </script>

  
  <meta charset="UTF-8" />
  <title>DailyPropHub ‚Äì NBA Player Props Trends & Model-Powered Insights</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary SEO -->
  <meta name="description"
      content="DailyPropHub provides NBA player prop trends, hit rates, model edges, and context (fatigue, travel, matchups, allowed stats). A free NBA props dashboard updated daily before tip-off." />
  <meta name="keywords"
      content="NBA player props, NBA props today, NBA prop trends, NBA prop model, NBA betting model, NBA prop predictions, NBA overs today, best NBA props, NBA stats, player prop edges, DailyPropHub" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://dailyprophub.com/" />

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="DailyPropHub ‚Äì NBA Player Prop Trends & Model-Powered Edges">
  <meta property="og:description"
      content="Explore NBA player prop trends, probabilities, hit rates, and model-powered edges ‚Äî updated daily before tip-off.">
  <meta property="og:url" content="https://dailyprophub.com/">
  <meta property="og:image" content="https://dailyprophub.com/og-image.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="DailyPropHub ‚Äì NBA Player Prop Trends & Edges">
  <meta name="twitter:description"
      content="A free NBA player prop dashboard for trends, probabilities, and model-powered edges.">
  <meta name="twitter:image" content="https://dailyprophub.com/og-image.png">

  <!-- Additional SEO / Rich Search -->
  <meta name="theme-color" content="#0d1117">
  <meta name="author" content="DailyPropHub">
  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

  <link rel="icon" href="/favicon.ico" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Top Nav -->
  <header class="site-header">
    <div class="container nav">
      <div class="logo">
        <span class="logo-mark">DPH</span>
        <span class="logo-text">DailyPropHub</span>
      </div>
      <nav class="nav-links">
        <a href="#features">Features</a>
        <a href="#how-it-works">How It Works</a>
        <a href="#faq">FAQ</a>
        <a href="#support">Support the Project</a>
      </nav>
      <div class="nav-cta">
        <a class="btn-primary" href="https://nbadailytrends.streamlit.app" target="_blank" rel="noopener">
          Launch NBA Dashboard
        </a>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container hero-grid">
      <div class="hero-copy">
        <h1>NBA Player Prop Trends & Model-Powered Edges ‚Äî In One Place.</h1>
        <p class="hero-subtitle">
          DailyPropHub tracks NBA player props, hit rates, model probabilities, and context
          (fatigue, travel, matchups, venues) to help you make sharper decisions ‚Äî not just vibes.
        </p>

        <div class="hero-actions">
          <a class="btn-primary hero-main-cta" href="https://nbadailytrends.streamlit.app" target="_blank" rel="noopener">
            üöÄ Open Daily NBA Dashboard
          </a>
          <a class="btn-secondary" href="#features">
            See what‚Äôs inside
          </a>
        </div>

        <p class="hero-meta">
          Updated daily at least ~2 hours before first tip-off.  
          <span class="hero-tag">For informational & entertainment purposes only.</span>
        </p>
      </div>

      <div class="hero-card">
        <div class="mini-tag">Live App Preview</div>
        <h2>Today‚Äôs Slate at a Glance</h2>
        <ul class="hero-list">
          <li>üî• Best Parlay of the Day (model + correlation based)</li>
          <li>üìä Top Overs by market (PTS, REB, AST, STL, 3PM)</li>
          <li>üìà Recent trend charts vs line & season averages</li>
          <li>üõ´ Travel, fatigue, opponent defense & allowed stats</li>
          <li>üß† Confidence index combining model, trends & context</li>
        </ul>
        <p class="hero-disclaimer">
          No picks sold. No subscriptions. Just data & tools ‚Äî free to use.
        </p>
      </div>
    </div>
  </section>

  <!-- ============================= -->
  <!-- TODAY'S MODEL HIGHLIGHTS -->
  <!-- ============================= -->
<section class="section model-highlights">
  <div class="container">
    <h2 class="section-title">üî• Today‚Äôs Model Highlights</h2>
    <p class="section-subtitle">
      Two lenses on today‚Äôs slate ‚Äî one curated for stability, one purely model-driven.
    </p>

    <div class="model-cards">
      <div id="featured-edge-card" class="model-card"></div>
      <div id="top-model-card" class="model-card"></div>
    </div>
  </div>
</section>

  <!-- ============================= -->
  <!-- MODEL PERFORMANCE SUMMARY -->
  <!-- ============================= -->
<section class="section model-performance">
  <div class="container">
    <h2 class="section-title">üìà Model Performance</h2>
    <p class="section-subtitle">
      Every Featured Edge and Top Model Pick is tracked ‚Äî wins and losses included.
    </p>

    <div id="model-results" class="results-grid">
      <div class="result-card">Loading performance‚Ä¶</div>
    </div>

    <p class="results-footnote">
      Past performance is not predictive. Shown for transparency only.
    </p>
  </div>
</section>
    
  <!-- Features -->
  <section id="features" class="section section-alt">
    <div class="container">
      <h2 class="section-title">Why Bettors Use DailyPropHub</h2>
      <p class="section-subtitle">
        Built by a hoops fan who got tired of guessing and scrolling ‚Äî DailyPropHub sits between
        raw box scores and paid touts, giving you a transparent view into the numbers.
      </p>

      <div class="features-grid">
        <div class="feature-card">
          <h3>üìä Model-Powered Edges</h3>
          <p>
            See model over probabilities vs implied book odds, plus estimated edge on each prop.
            No ‚Äúlocks‚Äù, just transparent numbers.
          </p>
        </div>

        <div class="feature-card">
          <h3>üìà Real Trends, Not Narratives</h3>
          <p>
            Quickly see last-N game performance vs the line and vs season averages, along with
            volatility (standard deviation) so you understand consistency.
          </p>
        </div>

        <div class="feature-card">
          <h3>üß© Correlated ‚ÄúBest Parlay‚Äù</h3>
          <p>
            A single 3-leg parlay surfaced each day based on model edge, correlation, and AIR
            score ‚Äî designed as a starting point for your own research.
          </p>
        </div>

        <div class="feature-card">
          <h3>üõ´ Context: Fatigue, Travel, Matchups</h3>
          <p>
            Back-to-backs, travel miles, defensive rankings, and opponent allowed stats
            are baked into the view so you don‚Äôt miss hidden context.
          </p>
        </div>

        <div class="feature-card">
          <h3>üìö Player Profiles & History</h3>
          <p>
            Dive into historical hit rates by market, day-of-week splits, and player-specific
            logs to see where certain props truly shine (or disappoint).
          </p>
        </div>

        <div class="feature-card">
          <h3>üíª Free, Evolving, Transparent</h3>
          <p>
            The project is actively iterated to improve consistency and accuracy over time.
            No paywall ‚Äî just optional support if the data helps you.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- How It Works -->
  <section id="how-it-works" class="section">
    <div class="container">
      <h2 class="section-title">How DailyPropHub Works</h2>
      <div class="hiw-grid">
        <div class="hiw-step">
          <div class="step-number">1</div>
          <h3>Collect & Clean Data</h3>
          <p>
            Game logs, prop lines, odds, and team context are pulled daily and cleaned into a
            consistent dataset with rolling metrics and matchup stats.
          </p>
        </div>
        <div class="hiw-step">
          <div class="step-number">2</div>
          <h3>Run the Models</h3>
          <p>
            A blend of baseline logic and machine learning estimates probabilities for each
            player prop, calibrated against historical outcomes.
          </p>
        </div>
        <div class="hiw-step">
          <div class="step-number">3</div>
          <h3>Surface Edges & Context</h3>
          <p>
            The dashboard highlights potential edges, recent hit rates, and contextual factors
            so you can quickly decide what deserves a deeper look.
          </p>
        </div>
        <div class="hiw-step">
          <div class="step-number">4</div>
          <h3>You Do the Final Handicapping</h3>
          <p>
            DailyPropHub is built as a decision support tool ‚Äî you bring the judgment, risk
            tolerance, and bankroll management. No picks are guaranteed.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Strip -->
  <section class="section cta-strip">
    <div class="container cta-strip-inner">
      <div>
        <h2>Ready to explore today‚Äôs NBA player prop landscape?</h2>
        <p>Open the live dashboard and start with the top markets or the Best Parlay of the Day.</p>
      </div>
      <div>
        <a class="btn-primary btn-large" href="https://nbadailytrends.streamlit.app" target="_blank" rel="noopener">
          Launch the Dashboard
        </a>
      </div>
    </div>
  </section>

  <!-- Live Preview Section -->
  <section class="section section-alt" id="preview">
    <div class="container">
      <h2 class="section-title">Live Dashboard Preview</h2>
      <p class="section-subtitle">
        Here‚Äôs a quick look at what you‚Äôll see inside the DailyPropHub NBA dashboard ‚Äî 
        real model-powered edges, clean visuals, and everything organized for fast decision-making.
      </p>

      <!-- Screenshot Grid -->
      <div class="preview-grid">

        <div class="preview-item">
          <img src="assets/screenshots/001_predictions.png" alt="Predictions Overview" />
          <p class="preview-caption">üèÄ Predictions Overview</p>
        </div>

        <div class="preview-item">
          <img src="assets/screenshots/005_top_overs_3pm.png" alt="3PM Top Overs" />
          <p class="preview-caption">üî• 3PM ¬∑ Top Overs</p>
        </div>

        <div class="preview-item">
          <img src="assets/screenshots/008_yesterday_results.png" alt="Yesterday Results" />
          <p class="preview-caption">üìä Yesterday's Results Breakdown</p>
        </div>

        <div class="preview-item">
          <img src="assets/screenshots/009_history_profile.png" alt="Player History" />
          <p class="preview-caption">üìö Historical Player Profiles</p>
        </div>

      </div>

      <!-- Tutorial Video -->
      <div class="video-wrapper">
        <h3 class="video-title">üé• Full Tutorial: How to Use the Dashboard</h3>
        <video controls class="tutorial-video">
          <source src="assets/video/final_tutorial.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>

    </div>
  </section>

  <style>
    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 28px;
      margin-top: 40px;
    }
    .preview-item img {
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.25);
      border: 1px solid #222;
    }
    .preview-caption {
      text-align: center;
      margin-top: 8px;
      color: #ccc;
      font-size: 0.95em;
    }
    .video-wrapper {
      margin-top: 60px;
      text-align: center;
    }
    .tutorial-video {
      width: 100%;
      max-width: 780px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.35);
    }
  </style>
  
  <!-- Support / Venmo -->
  <section id="support" class="section section-alt">
    <div class="container support-grid">
      <div>
        <h2 class="section-title">Support the Project</h2>
        <p class="section-subtitle">
          If DailyPropHub has helped you cash some slips or just save time digging through stats,
          you can support ongoing development and improvements.
        </p>

        <div class="donation-options">
          <a class="don-btn" href="https://venmo.com/u/DailyPropHub" target="_blank" rel="noopener">
            üç∫ Buy me a beer ($5)
          </a>
          <a class="don-btn" href="https://venmo.com/u/DailyPropHub" target="_blank" rel="noopener">
            üí∏ Tip me ($1)
          </a>
          <a class="don-btn" href="https://venmo.com/u/DailyPropHub" target="_blank" rel="noopener">
            üè¶ Pay a bill ($100)
          </a>
        </div>

        <p class="support-meta">
          Venmo: <strong>@DailyPropHub</strong>  
          <br />
          Every bit helps justify more time spent improving the models, visuals, and
          overall experience.
        </p>
      </div>

      <div class="support-sidebox">
        <h3>What‚Äôs Coming Next?</h3>
        <ul>
          <li>‚öæ MLB player prop expansion when the season returns</li>
          <li>üì¨ Optional email updates for new features & big slates</li>
          <li>üì± More mobile-first UX enhancements</li>
          <li>üß™ Ongoing model tuning using historical results</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="section">
    <div class="container">
      <h2 class="section-title">FAQ</h2>
      <div class="faq-grid">
        <div class="faq-item">
          <h3>Is this a pick-selling service?</h3>
          <p>
            No. DailyPropHub does not sell picks, ‚Äúlocks‚Äù, or subscriptions. It‚Äôs a data and
            visualization tool to help you make more informed decisions.
          </p>
        </div>
        <div class="faq-item">
          <h3>Is this free to use?</h3>
          <p>
            Yes. The NBA dashboard is free. If the tools help you, you can optionally support
            the project via Venmo to help cover time and hosting.
          </p>
        </div>
        <div class="faq-item">
          <h3>Does this guarantee profits?</h3>
          <p>
            Absolutely not. Sports are volatile and betting carries real risk. DailyPropHub
            is for informational and entertainment purposes only and does not guarantee
            outcomes or profits.
          </p>
        </div>
        <div class="faq-item">
          <h3>Will you add MLB or other sports?</h3>
          <p>
            MLB is planned as the next major expansion, using similar home run / prop modeling
            concepts. Other leagues might follow over time.
          </p>
        </div>
        <div class="faq-item">
          <h3>How often is the data updated?</h3>
          <p>
            The goal is to update at least once daily during the NBA season, typically ~2 hours
            before the first tip-off, with additional improvements to the pipeline over time.
          </p>
        </div>
        <div class="faq-item">
          <h3>Can I share feedback or feature ideas?</h3>
          <p>
            Definitely. The project is actively evolving. A contact/feedback channel will be
            added soon.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <div class="logo footer-logo">
          <span class="logo-mark">DPH</span>
          <span class="logo-text">DailyPropHub</span>
        </div>
        <p class="footer-text">
          NBA player prop trends & model-powered insights, refreshed throughout the season.
        </p>
        <p class="footer-disclaimer">
          DailyPropHub is for informational and entertainment purposes only.  
          Nothing on this site or in the dashboard is betting advice or a guarantee of results.  
          Please bet responsibly and within your means.
        </p>
      </div>
      <div class="footer-right">
        <div class="footer-links">
          <a href="#features">Features</a>
          <a href="#how-it-works">How It Works</a>
          <a href="#faq">FAQ</a>

          <!-- FIXED CONTACT BUTTON -->
          <a href="javascript:void(0)" id="footerContactBtn">Contact</a>

        </div>
        <a class="btn-secondary footer-cta" href="https://nbadailytrends.streamlit.app" target="_blank" rel="noopener">
          Open NBA Dashboard
        </a>
      </div>
    </div>

    <div class="footer-bottom">
      ¬© <span id="year"></span> DailyPropHub. All rights reserved.<br>
      NBA statistics and information are used for informational purposes only.<br>
      DailyPropHub is not affiliated with the NBA, its teams, or any sportsbook.<br>
      This website does not provide gambling advice. Please wager responsibly.
    </div>

    <script>
      document.getElementById('year').textContent = new Date().getFullYear();
    </script>
  </footer>

  <!-- CONTACT MODAL + EMAILJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
      emailjs.init("0_dafSDzoQhezJW_o");
  </script>

  <!-- Modal -->
  <div id="contactModal" style="
      display:none;
      position:fixed;
      top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.7);
      backdrop-filter: blur(5px);
      z-index:9999;
      justify-content:center;
      align-items:center;
  ">
      <div style="
          background:#111;
          padding:24px;
          width:90%;
          max-width:420px;
          border-radius:12px;
          color:white;
          box-shadow:0 4px 20px rgba(0,0,0,0.4);
      ">
          <h2>Contact Us</h2>
          <p style="color:#ccc;">Have a suggestion, idea, or issue? Send us a message.</p>

          <input id="contactEmail" type="email" placeholder="Your email"
              style="width:100%;padding:10px;margin-bottom:10px;border:1px solid #333;border-radius:6px;background:#1c1c1c;color:#fff;">

          <textarea id="contactMessage" placeholder="Your message"
              style="width:100%;height:120px;padding:10px;border:1px solid #333;border-radius:6px;background:#1c1c1c;color:#fff;"></textarea>

          <button onclick="sendContact()" style="
              width:100%;
              background:#1d72f3;
              color:white;
              padding:10px;
              margin-top:10px;
              border:none;
              border-radius:6px;
              font-size:1rem;
          ">Send</button>

          <button onclick="closeContact()" style="
              width:100%;
              background:#555;
              color:white;
              padding:8px;
              margin-top:10px;
              border:none;
              border-radius:6px;
          ">Cancel</button>
      </div>
  </div>

  <script>
    const modal = document.getElementById("contactModal");

    // üî• FIXED: only use the existing footer button
    document.getElementById("footerContactBtn").onclick = () => modal.style.display = "flex";

    function closeContact() {
        modal.style.display = "none";
    }

    function sendContact() {
        const email = document.getElementById("contactEmail").value;
        const msg = document.getElementById("contactMessage").value;

        if (!email || !msg) {
            alert("Please enter both email and message.");
            return;
        }  

        emailjs.send("service_xb35won", "template_j46hu89", {
            email: email,     // matches {{email}} in EmailJS
            name: "User",     // matches {{name}} ‚Äî you can add a name field later
            title: msg        // matches {{title}} in the auto-reply
        })
        .then(() => {
            alert("Message sent! We'll get back to you soon.");
            closeContact();
        })
        .catch((err) => {
            alert("‚ùå Error sending message");
            console.error(err);
        });
    }
    </script>

<script>
  const DASHBOARD_URL = "https://nbadailytrends.streamlit.app";
  const SUBSCRIBE_ENDPOINT =
  "https://script.google.com/macros/s/AKfycbwHOWAfNchFzuPri9yhkEVVlwHYh9tjBPH-e-TrxyyW4Oo6jhSsT3zGQyLMPVmKkSiD2g/exec";


  async function loadJson(url) {
    const res = await fetch(url, { cache: "no-store" });
    if (!res.ok) throw new Error("Failed to load " + url);
    return res.json();
  }

  function safeTeamAbbr(d) {
    // Prefer team_abbr if you add it; otherwise fallback to team (often already BOS/PHI/etc)
    return (d.team_abbr || d.team || "").toString().trim().toUpperCase();
  }

  function formatOdds(o) {
    const n = Number(o);
    if (!Number.isFinite(n)) return "";
    return n > 0 ? `+${n}` : `${n}`;
  }

  function formatTime(t) {
    // expects "18:00"
    try {
      const [h, m] = t.split(":").map(Number);
      const ampm = h >= 12 ? "PM" : "AM";
      const hr = h % 12 || 12;
      return `${hr}:${m.toString().padStart(2, "0")} ${ampm}`;
    } catch {
      return t;
    }
  }

  function confidenceTier(edge) {
    if (edge >= 0.22) return { label: "ELITE", pct: 95 };
    if (edge >= 0.15) return { label: "HIGH", pct: 85 };
    if (edge >= 0.08) return { label: "MEDIUM", pct: 70 };
    return { label: "LEAN", pct: 55 };
  }

  async function loadModelCards() {
    let headshots = {};
    try {
      headshots = await loadJson("/data/player_headshots.json");
    } catch (e) {
      console.warn("player_headshots.json not found (headshots will fallback).", e);
    }

    async function renderCard(pickUrl, containerId, label, subtitle) {
      const el = document.getElementById(containerId);
      if (!el) return;

      try {
        const d = await loadJson(pickUrl);
        
        let teamColors = null;
        try {
          const logos = await loadJson("/data/team_logos.json");
          const abbr = safeTeamAbbr(d);
          teamColors = logos[abbr] || null;
        } catch (e) {
          console.warn("team_logos.json not loaded", e);
        }

        const teamAbbr = safeTeamAbbr(d);
        const teamLogo = teamAbbr
          ? `https://a.espncdn.com/i/teamlogos/nba/500/${teamAbbr}.png`
          : null;

        // --- Matchup info (supports both JSON shapes) ---
        const opponentAbbr = d.opponent || d.matchup?.opponent_abbr || "";
        const opponentFull = d.opponent_full || d.matchup?.opponent || "";
        const isHome = d.is_home === 1 || d.matchup?.home_team === d.team_full;

        const homeAwayLabel = isHome ? "vs" : "@";

        const startTime = d.start_time_local || d.matchup?.start_time_local || "";
        const venueCity = d.venue_city || "";
        const venueState = d.venue_state || "";

        const matchupLine = opponentFull
          ? `${homeAwayLabel} ${opponentFull}${startTime ? " ‚Ä¢ " + formatTime(startTime) : ""}${venueCity ? " ‚Ä¢ " +         venueCity + (venueState ? ", " + venueState : "") : ""}`
          : "";

        // Headshot from your mapping
        const mappedHeadshot = headshots[d.player];
        // If no mapping, fall back to a silhouette in /assets (optional)
        const headshot = mappedHeadshot || "assets/player_silhouette.png";

        el.innerHTML = `
          <div class="model-card-inner team-accent"
               role="button"
               tabindex="0"
               style="
                 ${teamColors ? `
                   --team-primary: ${teamColors.primary_color};
                   --team-secondary: ${teamColors.secondary_color};
                 ` : ''}
               "

            <!-- HEADER (badge only ‚Äî logo REMOVED here) -->
            <div class="model-card-header">
              <span class="model-badge">${label}</span>
            </div>
            
            ${(() => {
              const c = confidenceTier(Number(d.edge));
              return `
                <div class="confidence-box">
                  <div class="confidence-ring" style="--pct:${c.pct}">
                    <span>${c.pct}%</span>
                  </div>
                  <div class="confidence-label">${c.label}</div>
                </div>
              `;
            })()}

            <!-- PLAYER ROW -->
            <div class="model-player">
              <div class="player-media">
                ${teamLogo ? `
                  <img class="team-logo-inline"
                       src="${teamLogo}"
                       alt="${teamAbbr} logo"
                       onerror="this.style.display='none'">
        `         : ""}

                <a
                  href="https://nbadailytrends.streamlit.app/?player=${encodeURIComponent(d.player)}"
                  target="_blank"
                  rel="noopener"
                >
                  <img class="player-headshot"
                       src="${headshot}"
                       alt="${d.player}"
                       onerror="this.src='assets/player_silhouette.png'">
                </a>
              </div>

              <div class="player-meta">
                <h3>
                  <a
                    href="https://nbadailytrends.streamlit.app/?player=${encodeURIComponent(d.player)}"
                    target="_blank"
                    rel="noopener"
                    class="player-link"
                  >
                    ${d.player}
                  </a>
                </h3>

                ${matchupLine ? `<p class="matchup-line">${matchupLine}</p>` : ""}

                <p>${d.market} Over ${d.line} <span class="odds">${formatOdds(d.odds)}</span></p>
                <p class="model-sub">${subtitle}</p>
              </div>
            </div>

            <div class="model-stats">
              <div><strong>${(Number(d.blend_prob)*100).toFixed(1)}%</strong><span>Model</span></div>
              <div><strong>${(Number(d.implied_prob)*100).toFixed(1)}%</strong><span>Implied</span></div>
              <div class="edge">
                <strong>${(Number(d.edge)*100 >= 0 ? "+" : "")}${(Number(d.edge)*100).toFixed(1)}%</strong>
                <span>Edge</span>
              </div>
            </div>

            ${d.why && d.why.length ? `
              <details class="why-pick">
                <summary>Why this pick</summary>
                <ul>
                  ${d.why.map(w => `<li>${w}</li>`).join("")}
                </ul>
              </details>
            ` : ""}

            <div class="subscribe-box">
              <input
                type="email"
                placeholder="Get daily picks by email"
                class="subscribe-input"
              />
              <button class="subscribe-btn">Subscribe</button>
              <div class="subscribe-msg"></div>
            </div>

            <a
              class="model-cta"
              href="https://nbadailytrends.streamlit.app"
              target="_blank"
              rel="noopener noreferrer"
            >
              View full breakdown ‚Üí
            </a>
          </div>
        `;

      } catch (e) {
        console.error("Failed loading model card", pickUrl, e);
        el.innerHTML = `
          <div class="model-card-inner">
            <div class="model-card-header">
              <span class="model-badge">${label}</span>
            </div>
            <div class="model-player">
              <div class="player-meta">
                <h3>Unavailable today</h3>
                <p>Model output not found yet.</p>
              </div>
            </div>
          </div>
        `;
      }
    }

    renderCard("/data/featured_edge_today.json", "featured-edge-card", "‚≠ê Featured Edge", "Lower variance, stability-filtered");
    renderCard("/data/top_model_pick_today.json", "top-model-card", "üî• Top Model Pick", "Highest raw EV (more variance)");
  }
  
    document.addEventListener("click", async (e) => {
    if (!e.target.classList.contains("subscribe-btn")) return;

    // GA: subscribe click intent
    if (typeof gtag === "function") {
      gtag("event", "subscribe_click", {
        event_category: "engagement",
        event_label: "model_card_subscribe"
      });
    }

    const box = e.target.closest(".subscribe-box");
    if (!box) return;

    const input = box.querySelector(".subscribe-input");
    const msg = box.querySelector(".subscribe-msg");

    const email = input.value.trim();
    if (!email || !email.includes("@")) {
      msg.textContent = "Enter a valid email";
      msg.style.color = "#f87171";
      return;
    }

    msg.textContent = "Subscribing...";
    msg.style.color = "#9ca3af";

    try {
      await fetch(SUBSCRIBE_ENDPOINT, {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded",
        },
        body: `email=${encodeURIComponent(email)}&source=dailyprophub_card`
      });

      msg.textContent = "‚úÖ Subscribed! Check your inbox.";
      msg.style.color = "#4cffc3";
      input.value = "";
      
      // GA: subscribe success
      if (typeof gtag === "function") {
        gtag("event", "subscribe_success", {
          event_category: "conversion",
          event_label: "dailyprophub_card"
        });
      }

    } catch (err) {
      // GA: subscribe error
      if (typeof gtag === "function") {
        gtag("event", "subscribe_error", {
          event_category: "conversion",
          event_label: err?.message || "unknown_error"
        });
      }
      msg.textContent = "‚ùå Subscription failed. Try again later.";
      msg.style.color = "#f87171";
    }
  });

  async function loadModelResults() {
    try {
      const res = await fetch("/data/model_results_summary.json", {
        cache: "no-store"
      });
      const d = await res.json();

      const el = document.getElementById("model-results");
      if (!el) return;

      el.innerHTML = `
        <div class="result-card">
          <h3>Latest Result</h3>
          <p>
            ‚≠ê Featured:
            <span class="${d.featured.yesterday === "HIT" ? "result-hit" : "result-miss"}">
              ${d.featured.yesterday ?? "‚Äî"}
            </span>
          </p>
          <p>
            üî• Top Model:
            <span class="${d.top_model.yesterday === "HIT" ? "result-hit" : "result-miss"}">
              ${d.top_model.yesterday ?? "‚Äî"}
            </span>
          </p>
        </div>

        <div class="result-card">
          <h3>Last 7 Days</h3>
          <p>
            Featured: ${d.featured.last_7_days.wins}-${d.featured.last_7_days.losses}
            (${(d.featured.last_7_days.hit_rate * 100).toFixed(1)}%)
          </p>
          <p>
            Top Model: ${d.top_model.last_7_days.wins}-${d.top_model.last_7_days.losses}
            (${(d.top_model.last_7_days.hit_rate * 100).toFixed(1)}%)
          </p>
        </div>

        <div class="result-card">
          <h3>Season-to-Date</h3>
          <p>Featured: ${(d.featured.season_to_date.hit_rate * 100).toFixed(1)}%</p>
          <p>Top Model: ${(d.top_model.season_to_date.hit_rate * 100).toFixed(1)}%</p>
        </div>
      `;
    } catch (err) {
      console.error("Failed to load model results", err);
    }
  }

  // GA: outbound clicks to Streamlit
  document.addEventListener("click", (e) => {
    const link = e.target.closest("a");
    if (!link) return;

    if (link.href && link.href.includes("nbadailytrends.streamlit.app")) {
      if (typeof gtag === "function") {
        gtag("event", "outbound_nba_dashboard", {
          event_category: "outbound",
          event_label: link.href
        });
      }
    }
  });

  loadModelCards();
  loadModelResults();

</script>
 
</body>
</html>